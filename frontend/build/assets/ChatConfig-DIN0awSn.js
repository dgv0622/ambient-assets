import{j as e}from"./ui-vendor-41IJQC_q.js";import{r,u as S}from"./react-vendor-aMOVk31l.js";import{B as g}from"./button-5Nn4NZOC.js";import{I as F}from"./input-DvRp_Huw.js";import{L as j,a as U}from"./label-DBUWVsPs.js";import{c as b,a as n,u as L}from"./index-WZlhhqsJ.js";import{A as R}from"./arrow-left-B3V7ZaO5.js";import"./query-vendor-CtRuh6GC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=b("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=b("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),c=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:n("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));c.displayName="Card";const d=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:n("flex flex-col space-y-1.5 p-6",s),...t}));d.displayName="CardHeader";const h=r.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:n("text-2xl font-semibold leading-none tracking-tight",s),...t}));h.displayName="CardTitle";const N=r.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:n("text-sm text-muted-foreground",s),...t}));N.displayName="CardDescription";const m=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:n("p-6 pt-0",s),...t}));m.displayName="CardContent";const T=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:n("flex items-center p-6 pt-0",s),...t}));T.displayName="CardFooter";const w=void 0,q=()=>{const[s,t]=r.useState(""),[a,x]=r.useState(""),[k,u]=r.useState(!1),[f,p]=r.useState(!1),v=S(),{toast:l}=L();r.useEffect(()=>{y()},[]);const y=async()=>{u(!0);try{const o=await fetch(`${w}/api/chat/config`);if(o.ok){const i=await o.json();i.webhook_url&&(x(i.webhook_url),t(i.webhook_url))}}catch(o){console.error("Error loading config:",o),l({title:"Error",description:"Failed to load configuration",variant:"destructive"})}finally{u(!1)}},C=async o=>{if(o.preventDefault(),!!s.trim()){p(!0);try{if((await fetch(`${w}/api/chat/config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({webhook_url:s})})).ok)x(s),l({title:"Success!",description:"n8n webhook URL has been updated"});else throw new Error("Failed to update configuration")}catch(i){console.error("Error saving config:",i),l({title:"Error",description:"Failed to save configuration",variant:"destructive"})}finally{p(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-dark p-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(g,{variant:"ghost",onClick:()=>v("/"),className:"mb-6 text-white hover:bg-white/10",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),e.jsxs(c,{className:"shadow-elegant",children:[e.jsxs(d,{children:[e.jsx(h,{className:"text-3xl font-light tracking-wide",children:"Chatbot Configuration"}),e.jsx(N,{children:"Configure the n8n webhook URL for the chatbot integration"})]}),e.jsx(m,{children:k?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(j,{className:"w-8 h-8 animate-spin text-[#FF2D55]"})}):e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"webhook-url",className:"text-lg",children:"n8n Webhook URL"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Enter your n8n workflow webhook URL. The chatbot will send user messages to this endpoint."}),e.jsx(F,{id:"webhook-url",type:"url",placeholder:"https://your-n8n-instance.com/webhook/chat",value:s,onChange:o=>t(o.target.value),required:!0,className:"mt-1"})]}),a&&e.jsx("div",{className:"bg-muted p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-dusty-red mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Currently Configured"}),e.jsx("p",{className:"text-sm text-muted-foreground break-all mt-1",children:a})]})]})}),e.jsxs("div",{className:"bg-accent/50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"n8n Workflow Setup Instructions:"}),e.jsxs("ol",{className:"text-sm space-y-2 list-decimal list-inside text-muted-foreground",children:[e.jsx("li",{children:"Create a new workflow in n8n"}),e.jsx("li",{children:"Add a Webhook trigger node"}),e.jsx("li",{children:"Configure your workflow to process incoming messages"}),e.jsxs("li",{children:["Your workflow will receive:",e.jsxs("ul",{className:"ml-6 mt-1 list-disc",children:[e.jsxs("li",{children:[e.jsx("code",{children:"session_id"})," - Unique chat session ID"]}),e.jsxs("li",{children:[e.jsx("code",{children:"user_name"})," - User's name"]}),e.jsxs("li",{children:[e.jsx("code",{children:"user_email"})," - User's email"]}),e.jsxs("li",{children:[e.jsx("code",{children:"message"})," - User's message"]}),e.jsxs("li",{children:[e.jsx("code",{children:"timestamp"})," - Message timestamp"]})]})]}),e.jsxs("li",{children:["Your workflow must return a JSON response with:",e.jsx("ul",{className:"ml-6 mt-1 list-disc",children:e.jsx("li",{children:e.jsx("code",{children:`{"response": "Your bot's reply message"}`})})})]}),e.jsx("li",{children:"Copy the webhook URL and paste it above"})]})]}),e.jsx(g,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-[#FF2D55] via-[#FF1744] to-[#E91E63] hover:shadow-lg hover:shadow-[#FF2D55]/50 transition-all duration-300 rounded-xl font-semibold",disabled:f||!s.trim(),children:f?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-5 h-5 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 mr-2"}),"Save Configuration"]})})]})})]}),e.jsxs(c,{className:"mt-6 shadow-elegant",children:[e.jsx(d,{children:e.jsx(h,{className:"text-xl font-light",children:"Testing the Chatbot"})}),e.jsxs(m,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"After configuring the webhook URL, you can test the chatbot by clicking the chat button on the home page. The chatbot will:"}),e.jsxs("ul",{className:"text-sm space-y-2 list-disc list-inside text-muted-foreground ml-4",children:[e.jsx("li",{children:"Collect user name and email before starting the conversation"}),e.jsx("li",{children:"Send each message to your n8n workflow"}),e.jsx("li",{children:"Display the response from n8n back to the user"}),e.jsx("li",{children:"Store conversation history for each session"})]})]})]})]})})};export{q as default};
